# å·¥åŽ‚å®šé¢å’Œè®¡ä»¶å·¥èµ„ç®¡ç†ç³»ç»Ÿ

## é¡¹ç›®ç®€ä»‹

å·¥åŽ‚å®šé¢å’Œè®¡ä»¶å·¥èµ„ç®¡ç†ç³»ç»Ÿæ˜¯ä¸€ä¸ªç”¨äºŽå·¥åŽ‚ç®¡ç†å·¥åºå®šé¢å’Œå·¥äººè®¡ä»¶å·¥èµ„çš„Webåº”ç”¨ã€‚è¯¥ç³»ç»Ÿæ”¯æŒå·¥åºç®¡ç†ã€å®šé¢è®¾ç½®ã€å·¥äººä¿¡æ¯ç®¡ç†ã€å·¥èµ„è®°å½•ä»¥åŠæŠ¥è¡¨ç»Ÿè®¡ç­‰åŠŸèƒ½ï¼Œå¸®åŠ©å·¥åŽ‚å®žçŽ°è‡ªåŠ¨åŒ–çš„å·¥èµ„è®¡ç®—å’Œç®¡ç†ã€‚

## æœ€è¿‘æ›´æ–° (2026-01-01)

### å®šé¢è¡¨æ–°å¢žä½œåºŸæ—¥æœŸå­—æ®µä¸Žä¸šåŠ¡é€»è¾‘ä¼˜åŒ–
1. **æ–°å¢ž `obsolete_date` å­—æ®µ**ï¼šåœ¨å®šé¢è¡¨ (`quotas`) ä¸­æ–°å¢žä½œåºŸæ—¥æœŸå­—æ®µ
   - é»˜è®¤å€¼ï¼š`9999-12-31`ï¼Œè¡¨ç¤ºå½“å‰æœ‰æ•ˆçš„å®šé¢
   - æ•°æ®åº“è¿ç§»è„šæœ¬è‡ªåŠ¨ä¸ºçŽ°æœ‰è®°å½•æ·»åŠ è¯¥å­—æ®µ
   - æ›´æ–°æ•°æ®åº“ç»“æž„æ–‡æ¡£ (`document/DATABASE_SCHEMA.md`)

2. **åŽç«¯ä¸šåŠ¡é€»è¾‘ä¼˜åŒ–**ï¼š
   - **å®šé¢åˆ›å»ºé€»è¾‘ (`create_quota`)**ï¼š
     - å½“åˆ›å»ºæ–°å®šé¢æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŸ¥æ‰¾ç›¸åŒç»„åˆï¼ˆå·¥åºç¼–ç ã€å·¥æ®µç¼–ç ã€å·¥åºç±»åˆ«ç¼–ç ã€ç”µæœºåž‹å·ï¼‰ä¸”ä½œåºŸæ—¥æœŸä¸º `9999-12-31` çš„çŽ°æœ‰å®šé¢
     - å¦‚æžœæ‰¾åˆ°ï¼Œå°†çŽ°æœ‰å®šé¢çš„ä½œåºŸæ—¥æœŸæ›´æ–°ä¸ºæ–°å®šé¢ç”Ÿæ•ˆæ—¥æœŸçš„å‰ä¸€å¤©
     - ç¡®ä¿åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªæœ‰æ•ˆçš„å®šé¢ç»„åˆ
     - è®°å½•è­¦å‘Šæ—¥å¿—ä»¥ä¾¿è·Ÿè¸ªå®šé¢æ›´æ–°åŽ†å²
   
   - **å·¥ä½œè®°å½•éªŒè¯é€»è¾‘ (`create_work_record`)**ï¼š
     - åˆ›å»ºå·¥ä½œè®°å½•æ—¶ï¼ŒéªŒè¯å·¥ä½œè®°å½•æ—¥æœŸæ˜¯å¦åœ¨å®šé¢çš„æœ‰æ•ˆæœŸå†…ï¼ˆç”Ÿæ•ˆæ—¥æœŸ â‰¤ å·¥ä½œè®°å½•æ—¥æœŸ â‰¤ ä½œåºŸæ—¥æœŸï¼‰
     - å¦‚æžœæ—¥æœŸæ—©äºŽå®šé¢ç”Ÿæ•ˆæ—¥æœŸæˆ–æ™šäºŽä½œåºŸæ—¥æœŸï¼ŒæŠ›å‡º `ValueError` å¹¶é˜»æ­¢è®°å½•åˆ›å»º
     - æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ä¾¿äºŽè°ƒè¯•å’Œç”¨æˆ·åé¦ˆ

3. **å‰ç«¯æ›´æ–°**ï¼š
   - æ›´æ–°å®šé¢ç®¡ç†é¡µé¢ (`frontend/src/pages/QuotaManagement.jsx`) æ˜¾ç¤ºä½œåºŸæ—¥æœŸå­—æ®µ
   - æ›´æ–°TypeScriptç±»åž‹å®šä¹‰ (`frontend/src/types/index.ts`) åŒ…å«æ–°å­—æ®µ

4. **æµ‹è¯•éªŒè¯**ï¼š
   - è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶ (`test/development/99_overall_test.sh`) éªŒè¯æ‰€æœ‰åŠŸèƒ½æ­£å¸¸
   - æ‰€æœ‰APIæµ‹è¯•ã€å‰ç«¯æµ‹è¯•å’ŒPuppeteeræµ‹è¯•é€šè¿‡

### TypeScriptè¿ç§»ä¸Žå‰ç«¯ä¼˜åŒ– (2025-12-24)
1. **TypeScriptè¿ç§»å®Œæˆ**ï¼šå‰ç«¯æ ¸å¿ƒåŸºç¡€è®¾æ–½å·²è¿ç§»åˆ°TypeScript
   - æ ¸å¿ƒæ–‡ä»¶è¿ç§»ï¼š`App.tsx`, `Layout.tsx`, `Login.tsx`, `api.ts`, `main.tsx`
   - åˆ é™¤JavaScripté‡å¤æ–‡ä»¶ï¼š`App.jsx`, `Layout.jsx`, `Login.jsx`, `api.js`, `main.jsx`
   - èœå•ç»“æž„ä¼˜åŒ–ï¼šé‡æ–°æŽ’åºä¾§è¾¹æ èœå•é¡¹ï¼Œ"å·¥åºç®¡ç†"çŽ°åœ¨ä½äºŽ"å·¥åºç±»åˆ«"ä¹‹åŽ

2. **å‰ç«¯æž¶æž„ä¼˜åŒ–**ï¼š
   - ç»Ÿä¸€ä½¿ç”¨TypeScriptä½œä¸ºå…¥å£ç‚¹ (`main.tsx`)
   - ä¿ç•™JavaScripté¡µé¢ç»„ä»¶ç”¨äºŽæ¸è¿›å¼è¿ç§»
   - ä¿®å¤TypeScriptç¼–è¯‘è­¦å‘Šï¼ˆæœªä½¿ç”¨çš„å¯¼å…¥ç­‰ï¼‰

3. **èœå•ç»“æž„è°ƒæ•´**ï¼š
   - å·¥äººç®¡ç† â†’ åž‹å·ç®¡ç† â†’ å·¥æ®µç±»åˆ«ç®¡ç† â†’ å·¥åºç±»åˆ«ç®¡ç† â†’ å·¥åºç®¡ç† â†’ å®šé¢ç®¡ç† â†’ å·¥èµ„è®°å½• â†’ æŠ¥è¡¨ç»Ÿè®¡
   - ç¬¦åˆä¸šåŠ¡é€»è¾‘æµç¨‹ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒ

### HTTPSéƒ¨ç½²ä¸Žäº‘æœåŠ¡å™¨é…ç½® (2025-12-05)
1. **HTTPSéƒ¨ç½²å®Œæˆ**ï¼šæˆåŠŸåœ¨äº‘æœåŠ¡å™¨ `124.220.108.154` ä¸Šå®ŒæˆHTTPSéƒ¨ç½²
   - ç”Ÿæˆè‡ªç­¾åSSLè¯ä¹¦
   - é…ç½®Nginxåå‘ä»£ç†æ”¯æŒHTTPS
   - å®žçŽ°HTTPåˆ°HTTPSè‡ªåŠ¨é‡å®šå‘
   - æ–°å¢ž `nginx-https-production.conf` é…ç½®æ–‡ä»¶

2. **SSHå…å¯†ç™»å½•é…ç½®**ï¼šä¸ºäº‘æœåŠ¡å™¨é…ç½®SSHå¯†é’¥ï¼Œå®žçŽ°Gitå…å¯†æ“ä½œ
   - ç”ŸæˆSSHå¯†é’¥å¯¹
   - é…ç½®SSHå…å¯†ç™»å½•åˆ°Gitee
   - æ”¯æŒäº‘æœåŠ¡å™¨è‡ªåŠ¨æ‹‰å–ä»£ç æ›´æ–°

3. **éƒ¨ç½²æµç¨‹ä¼˜åŒ–**ï¼š
   - åˆ›å»ºæ ‡å‡†åŒ–HTTPSéƒ¨ç½²æµç¨‹æ–‡æ¡£ (`HTTPS_DEPLOYMENT_ANALYSIS_AND_PROCEDURE.md`)
   - ä¼˜åŒ–Dockerå®¹å™¨éƒ¨ç½²è„šæœ¬
   - æ·»åŠ è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬ (`test_https_puppeteer.js`)

4. **ç³»ç»ŸéªŒè¯**ï¼š
   - é€šè¿‡Puppeteerè‡ªåŠ¨åŒ–æµ‹è¯•éªŒè¯HTTPSç™»å½•åŠŸèƒ½
   - æµ‹è¯•APIæŽ¥å£åœ¨HTTPSçŽ¯å¢ƒä¸‹çš„æ­£å¸¸å·¥ä½œ
   - éªŒè¯å‰ç«¯èµ„æºæ­£ç¡®åŠ è½½

### å¯†ç é‡ç½®ä¸Žç³»ç»Ÿä¼˜åŒ– (2025-12-04)
1. **å¯†ç é‡ç½®**ï¼šé‡ç½®äº†ä¸‰ä¸ªå…³é”®ç”¨æˆ·çš„å¯†ç ï¼Œç¡®ä¿ç³»ç»Ÿå®‰å…¨ï¼š
   - `root` â†’ `root123`
   - `test` â†’ `test123`
   - `stat` â†’ `start`

2. **å‰ç«¯é…ç½®ä¼˜åŒ–**ï¼š
   - æ›´æ–°äº†å‰ç«¯çŽ¯å¢ƒå˜é‡ (`frontend/.env`)ï¼Œå°†APIåŸºç¡€URLä»Ž `http://localhost:8001/api` æ”¹ä¸ºç›¸å¯¹è·¯å¾„ `/api`ï¼Œä½¿å‰ç«¯åœ¨Dockerå®¹å™¨ä¸­èƒ½æ­£ç¡®è®¿é—®åŽç«¯APIã€‚
   - é‡æ–°æž„å»ºäº†å‰ç«¯é™æ€æ–‡ä»¶å¹¶æ›´æ–°äº†Dockeré•œåƒã€‚

3. **Dockerå®¹å™¨ç¨³å®šæ€§**ï¼š
   - ä¿®å¤äº†Dockerå®¹å™¨å¼‚å¸¸é€€å‡ºé—®é¢˜ï¼Œç¡®ä¿å®¹å™¨å¥åº·è¿è¡Œã€‚
   - æ›´æ–°äº†Docker Composeé…ç½®ï¼Œç¡®ä¿å‰ç«¯å’ŒåŽç«¯æœåŠ¡æ­£å¸¸åä½œã€‚

4. **æµ‹è¯•è„šæœ¬æ¸…ç†**ï¼š
   - ç§»é™¤äº†ä¸´æ—¶æµ‹è¯•è„šæœ¬ (`fix_password.py`, `reset_passwords.py`, `test_new_passwords.py` ç­‰)ã€‚
   - ä¿ç•™äº†æ ¼å¼åŒ–çš„æµ‹è¯•è„šæœ¬åœ¨ `test/` ç›®å½•ä¸­ã€‚

5. **ç³»ç»ŸéªŒè¯**ï¼š
   - éªŒè¯äº†æ‰€æœ‰ç”¨æˆ·çš„æ–°å¯†ç ç™»å½•åŠŸèƒ½ã€‚
   - ç¡®è®¤äº†ç»Ÿè®¡å‘˜ (`stat`) èƒ½å¤Ÿæ­£å¸¸è®¿é—®ç»Ÿè®¡APIã€‚
   - æµ‹è¯•äº†Dockerå®¹å™¨è¿è¡ŒçŠ¶æ€å’ŒAPIå¥åº·æ£€æŸ¥ã€‚

### ä½¿ç”¨è¯´æ˜Žæ›´æ–°
- ç³»ç»ŸçŽ°åœ¨å¯é€šè¿‡HTTPSè®¿é—®ï¼š`https://124.220.108.154`
- HTTPè¯·æ±‚è‡ªåŠ¨é‡å®šå‘åˆ°HTTPS
- ç™»å½•æ—¶å¦‚é‡é—®é¢˜ï¼Œè¯·å°è¯•æµè§ˆå™¨ç¡¬åˆ·æ–° (Ctrl+F5) ä»¥æ¸…é™¤ç¼“å­˜ã€‚

## å¾…åŠžäº‹é¡¹ (TODO)

### TypeScriptè¿ç§» - ç¬¬äºŒé˜¶æ®µ (æœªæ¥è®¡åˆ’)
å½“å‰å‰ç«¯é‡‡ç”¨æ··åˆæž¶æž„ï¼ˆTypeScriptæ ¸å¿ƒ + JavaScripté¡µé¢ç»„ä»¶ï¼‰ã€‚ä»¥ä¸‹æ˜¯æœªæ¥è¿ç§»è®¡åˆ’ï¼š

#### å·²å®Œæˆè¿ç§» (Phase 1 & 2)
- âœ… **æ ¸å¿ƒåŸºç¡€è®¾æ–½**: `App.tsx`, `Layout.tsx`, `Login.tsx`, `api.ts`, `main.tsx`
- âœ… **èœå•ä¼˜åŒ–**: é‡æ–°æŽ’åºä¾§è¾¹æ èœå•ï¼Œ"å·¥åºç®¡ç†"ä½äºŽ"å·¥åºç±»åˆ«"ä¹‹åŽ
- âœ… **æž„å»ºéªŒè¯**: TypeScriptç¼–è¯‘é€šè¿‡ï¼Œä»…å­˜åœ¨é¢„æœŸçš„ç±»åž‹è­¦å‘Š

#### å¾…è¿ç§»é¡µé¢ (10ä¸ªJavaScriptæ–‡ä»¶)
1. `Home.jsx` - é¦–é¡µ/ç»Ÿè®¡é¢æ¿
2. `UserManagement.jsx` - ç”¨æˆ·ç®¡ç†é¡µé¢
3. `WorkerManagement.jsx` - å·¥äººç®¡ç†é¡µé¢
4. `ProcessManagement.jsx` - å·¥åºç®¡ç†é¡µé¢
5. `ProcessCat1Management.jsx` - å·¥æ®µç±»åˆ«ç®¡ç†
6. `ProcessCat2Management.jsx` - å·¥åºç±»åˆ«ç®¡ç†
7. `MotorModelManagement.jsx` - ç”µæœºåž‹å·ç®¡ç†
8. `QuotaManagement.jsx` - å®šé¢ç®¡ç†é¡µé¢
9. `SalaryRecord.jsx` - å·¥èµ„è®°å½•é¡µé¢
10. `Report.jsx` - æŠ¥è¡¨ç»Ÿè®¡é¡µé¢

#### è¿ç§»é£Žé™©è¯„ä¼°
- **å½“å‰çŠ¶æ€**: ç¨³å®šï¼ŒåŠŸèƒ½æ­£å¸¸ï¼Œæ··åˆæž¶æž„å¯æŽ¥å—
- **é£Žé™©ç­‰çº§**: ä½Žåˆ°ä¸­ç­‰ï¼ˆç±»åž‹å®‰å…¨ç¼ºå£ï¼Œä½†è¿è¡Œæ—¶åŠŸèƒ½æ­£å¸¸ï¼‰
- **å»ºè®®**: æŒ‰é¡µé¢ä½¿ç”¨é¢‘çŽ‡å’Œå¤æ‚åº¦é€æ­¥è¿ç§»

#### è¿ç§»æ­¥éª¤ (æœªæ¥æ‰§è¡Œ)
1. **å‡†å¤‡é˜¶æ®µ**: æ£€æŸ¥`types/index.ts`ç±»åž‹å®šä¹‰å®Œæ•´æ€§
2. **è¿ç§»æ‰§è¡Œ**: é€ä¸ªé¡µé¢è½¬æ¢ä¸º`.tsx`ï¼Œæ·»åŠ ç±»åž‹æ³¨è§£
3. **æµ‹è¯•éªŒè¯**: æ¯ä¸ªé¡µé¢è¿ç§»åŽæ‰‹åŠ¨æµ‹è¯•åŠŸèƒ½
4. **æ¸…ç†é˜¶æ®µ**: åˆ é™¤åŽŸå§‹`.jsx`æ–‡ä»¶ï¼Œæ›´æ–°å¯¼å…¥

#### ä¼˜å…ˆçº§å»ºè®®
1. **é«˜ä¼˜å…ˆçº§**: `UserManagement.jsx`, `WorkerManagement.jsx`ï¼ˆé¢‘ç¹ä½¿ç”¨ï¼‰
2. **ä¸­ä¼˜å…ˆçº§**: `ProcessManagement.jsx`, `QuotaManagement.jsx`ï¼ˆæ ¸å¿ƒä¸šåŠ¡ï¼‰
3. **ä½Žä¼˜å…ˆçº§**: å…¶ä»–ç¨³å®šé¡µé¢

## æŠ€æœ¯æ ˆ

### åŽç«¯
- **æ¡†æž¶**: FastAPI
- **æ•°æ®åº“**: SQLite (ç”Ÿäº§çŽ¯å¢ƒå¯æ›¿æ¢ä¸ºMySQL/PostgreSQL)
- **ORM**: SQLAlchemy
- **è®¤è¯**: JWT
- **ä¾èµ–ç®¡ç†**: pip

### å‰ç«¯
- **æ¡†æž¶**: React 19
- **æž„å»ºå·¥å…·**: Vite
- **UIç»„ä»¶åº“**: Ant Design 6
- **è·¯ç”±**: React Router 7
- **HTTPå®¢æˆ·ç«¯**: Axios

## é¡¹ç›®ç»“æž„

```
new_payroll/
â”œâ”€â”€ backend/                 # åŽç«¯ä»£ç 
â”‚   â”œâ”€â”€ app/                # FastAPIåº”ç”¨
â”‚   â”‚   â”œâ”€â”€ api/            # APIè·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.py     # è®¤è¯ç›¸å…³API
â”‚   â”‚   â”‚   â”œâ”€â”€ user.py     # ç”¨æˆ·ç®¡ç†API
â”‚   â”‚   â”‚   â”œâ”€â”€ worker.py   # å·¥äººç®¡ç†API
â”‚   â”‚   â”‚   â”œâ”€â”€ process.py  # å·¥åºç®¡ç†API
â”‚   â”‚   â”‚   â”œâ”€â”€ process_cat1.py  # å·¥æ®µç±»åˆ«API
â”‚   â”‚   â”‚   â”œâ”€â”€ process_cat2.py  # å·¥åºç±»åˆ«API
â”‚   â”‚   â”‚   â”œâ”€â”€ motor_model.py   # ç”µæœºåž‹å·API
â”‚   â”‚   â”‚   â”œâ”€â”€ quota.py    # å®šé¢ç®¡ç†API
â”‚   â”‚   â”‚   â”œâ”€â”€ salary.py   # å·¥èµ„è®°å½•API
â”‚   â”‚   â”‚   â”œâ”€â”€ report.py   # æŠ¥è¡¨API
â”‚   â”‚   â”‚   â””â”€â”€ stats.py    # ç»Ÿè®¡API
â”‚   â”‚   â”œâ”€â”€ models.py       # æ•°æ®åº“æ¨¡åž‹
â”‚   â”‚   â”œâ”€â”€ schemas.py      # Pydanticæ¨¡åž‹
â”‚   â”‚   â”œâ”€â”€ database.py     # æ•°æ®åº“è¿žæŽ¥
â”‚   â”‚   â”œâ”€â”€ crud.py         # CRUDæ“ä½œ
â”‚   â”‚   â””â”€â”€ main.py         # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ requirements.txt     # ä¾èµ–åˆ—è¡¨
â”‚   â”œâ”€â”€ run.py              # è¿è¡Œè„šæœ¬
â”‚   â”œâ”€â”€ scripts/            # å·¥å…·è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ init_db.py          # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ generate_test_data.py # æµ‹è¯•æ•°æ®ç”Ÿæˆè„šæœ¬
â”‚   â”‚   â”œâ”€â”€ check_routes.py     # è·¯ç”±æ£€æŸ¥è„šæœ¬
â”‚   â”‚   â””â”€â”€ query_quota_records.py # å®šé¢è®°å½•æŸ¥è¯¢è„šæœ¬
â”‚   â””â”€â”€ payroll.db          # SQLiteæ•°æ®åº“ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ frontend/               # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/               # æºä»£ç 
â”‚   â”‚   â”œâ”€â”€ components/    # Reactç»„ä»¶ (Layout.tsx)
â”‚   â”‚   â”œâ”€â”€ pages/         # é¡µé¢ç»„ä»¶ (æ··åˆ: .jsx + .tsx)
â”‚   â”‚   â”œâ”€â”€ services/      # APIæœåŠ¡ (api.ts)
â”‚   â”‚   â”œâ”€â”€ types/         # TypeScriptç±»åž‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ App.tsx        # åº”ç”¨ç»„ä»¶ (TypeScript)
â”‚   â”‚   â””â”€â”€ main.tsx       # åº”ç”¨å…¥å£ (TypeScript)
â”‚   â”œâ”€â”€ package.json       # ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ tsconfig.json      # TypeScripté…ç½®
â”‚   â””â”€â”€ vite.config.js     # Viteé…ç½®
â”œâ”€â”€ test/                  # æµ‹è¯•è„šæœ¬å’Œèµ„æº
â”‚   â”œâ”€â”€ development/       # å¼€å‘æµ‹è¯•è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ test_api.py        # APIæµ‹è¯•è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ test_login.js      # å‰ç«¯ç™»å½•æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_user_management.js  # ç”¨æˆ·ç®¡ç†æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_worker_process_operations.js  # å·¥äººå·¥åºæ“ä½œæµ‹è¯•
â”‚   â”‚   â””â”€â”€ test_new_tables.js  # æ–°è¡¨æµ‹è¯•
â”‚   â”œâ”€â”€ docker_puppeteer/  # Docker Puppeteeræµ‹è¯•
â”‚   â””â”€â”€ *.png              # æµ‹è¯•æˆªå›¾
â”œâ”€â”€ Dockerfile             # Dockeré…ç½®
â”œâ”€â”€ nginx-https-production.conf # ç”Ÿäº§çŽ¯å¢ƒHTTPS Nginxé…ç½®
â”œâ”€â”€ CLOUD_DEPLOYMENT.md    # äº‘æœåŠ¡å™¨éƒ¨ç½²æŒ‡å—
â”œâ”€â”€ HTTPS_DEPLOYMENT_GUIDE.md # HTTPSéƒ¨ç½²æŒ‡å—
â”œâ”€â”€ HTTPS_DEPLOYMENT_ANALYSIS_AND_PROCEDURE.md # HTTPSéƒ¨ç½²åˆ†æžä¸Žæµç¨‹æ–‡æ¡£ï¼ˆæœ€æ–°ï¼‰
â”œâ”€â”€ SSH_Password_Less_Login_Guide.md # SSHå…å¯†ç™»å½•æŒ‡å—
â”œâ”€â”€ generate_ssl_cert.sh   # SSLè¯ä¹¦ç”Ÿæˆè„šæœ¬
â”œâ”€â”€ fix_password_hash.py   # å¯†ç å“ˆå¸Œä¿®å¤è„šæœ¬
â”œâ”€â”€ test_https_puppeteer.js # HTTPSè‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬
â””â”€â”€ README.md              # é¡¹ç›®è¯´æ˜Ž
```

## åŠŸèƒ½æ¨¡å—

### 1. ç”¨æˆ·ç®¡ç†
- ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ä¿®æ”¹å¯†ç 
- è§’è‰²æƒé™ç®¡ç†ï¼ˆç®¡ç†å‘˜ã€ç»Ÿè®¡å‘˜ã€æŠ¥è¡¨æŸ¥çœ‹å‘˜ï¼‰
- ç”¨æˆ·ä¿¡æ¯ç»´æŠ¤
- æ–°ç”¨æˆ·é¦–æ¬¡ç™»å½•éœ€ä¿®æ”¹å¯†ç ï¼ˆneed_change_passwordæœºåˆ¶ï¼‰

### 2. å·¥äººç®¡ç†
- å·¥äººä¿¡æ¯çš„å¢žåˆ æ”¹æŸ¥
- å·¥å·ç®¡ç†

### 3. å·¥æ®µç±»åˆ«ç®¡ç†
- å·¥æ®µåˆ†ç±»ä¿¡æ¯ç»´æŠ¤ï¼ˆå¦‚ï¼šç²¾åŠ å·¥ã€è£…é…å–·æ¼†ã€ç»•åµŒæŽ’ç­‰ï¼‰
- å·¥æ®µç¼–ç å’Œåç§°ç®¡ç†

### 4. å·¥åºç±»åˆ«ç®¡ç†
- å·¥åºåˆ†ç±»ä¿¡æ¯ç»´æŠ¤
- å·¥åºç±»åˆ«ç¼–ç å’Œåç§°ç®¡ç†

### 5. ç”µæœºåž‹å·ç®¡ç†
- ç”µæœºåž‹å·ä¿¡æ¯ç»´æŠ¤
- ç”µæœºåž‹å·åç§°å’Œåˆ«åç®¡ç†

### 6. å·¥åºç®¡ç†
- å·¥åºä¿¡æ¯ç»´æŠ¤
- å·¥åºç¼–ç ã€åç§°å’Œæè¿°ç®¡ç†

### 7. å®šé¢ç®¡ç†
- å·¥åºå®šé¢è®¾ç½®ï¼ˆå…³è”å·¥åºã€å·¥æ®µã€å·¥åºç±»åˆ«ã€ç”µæœºåž‹å·ï¼‰
- å•ä»·å’Œç”Ÿæ•ˆæ—¥æœŸç®¡ç†
- å®šé¢åŽ†å²è®°å½•

### 8. å·¥èµ„è®°å½•
- å·¥äººå·¥ä½œè®°å½•å½•å…¥ï¼ˆæ•°é‡ã€æ—¥æœŸï¼‰
- å·¥èµ„è‡ªåŠ¨è®¡ç®—ï¼ˆæ•°é‡ Ã— å•ä»·ï¼‰
- æŒ‰æ—¥æœŸç»Ÿè®¡å’ŒæŸ¥è¯¢

### 9. æŠ¥è¡¨åŠŸèƒ½
- å·¥äººå·¥èµ„æŠ¥è¡¨ç”Ÿæˆ
- å·¥åºå·¥ä½œé‡æŠ¥è¡¨
- å·¥èµ„æ±‡æ€»æŠ¥è¡¨
- æ•°æ®å¯¼å‡ºåŠŸèƒ½

### 10. ç»Ÿè®¡åŠŸèƒ½
- ç³»ç»Ÿæ•°æ®ç»Ÿè®¡ï¼ˆç”¨æˆ·æ•°ã€å·¥äººæ•°ã€å·¥åºæ•°ç­‰ï¼‰
- å·¥åºå®šé¢ç»Ÿè®¡
- å·¥äººå·¥èµ„ç»Ÿè®¡
- ç”Ÿäº§æ•ˆçŽ‡åˆ†æž

## å®‰å…¨é…ç½®

### ðŸ” æ•°æ®åº“å‡­è¯å®‰å…¨æœ€ä½³å®žè·µ

ç³»ç»Ÿå·²å®žçŽ°å®‰å…¨çš„æ•°æ®åº“å‡­è¯ç®¡ç†ï¼Œéµå¾ªä»¥ä¸‹æœ€ä½³å®žè·µï¼š

1. **çŽ¯å¢ƒå˜é‡ç®¡ç†**ï¼šæ•æ„Ÿä¿¡æ¯å­˜å‚¨åœ¨çŽ¯å¢ƒå˜é‡ä¸­ï¼Œä¸ç¡¬ç¼–ç åœ¨ä»£ç ä¸­
2. **Gitå¿½ç•¥**ï¼š`.env` æ–‡ä»¶å·²æ·»åŠ åˆ° `.gitignore`ï¼Œé˜²æ­¢æ•æ„Ÿä¿¡æ¯æ³„éœ²
3. **å®‰å…¨è„šæœ¬**ï¼šæä¾›äº¤äº’å¼é…ç½®è„šæœ¬ï¼Œå®‰å…¨è¾“å…¥å¯†ç 
4. **Dockerå®‰å…¨**ï¼šDockerå®¹å™¨æ”¯æŒè¿è¡Œæ—¶çŽ¯å¢ƒå˜é‡æ³¨å…¥

### çŽ¯å¢ƒå˜é‡é…ç½®

#### æ–¹æ³•ä¸€ï¼šä½¿ç”¨é…ç½®è„šæœ¬ï¼ˆæŽ¨èï¼‰
```bash
cd backend
python setup_env.py
```
è„šæœ¬å°†å¼•å¯¼æ‚¨å®‰å…¨åœ°é…ç½®ï¼š
- æ•°æ®åº“è¿žæŽ¥ä¿¡æ¯ï¼ˆä¸»æœºã€ç«¯å£ã€ç”¨æˆ·åã€å¯†ç ï¼‰
- å®‰å…¨å¯†é’¥ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
- å…¶ä»–å¿…è¦é…ç½®

#### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨é…ç½®
1. å¤åˆ¶ç¤ºä¾‹æ–‡ä»¶ï¼š
```bash
cp backend/.env.example backend/.env
```

2. ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œè®¾ç½®æ‚¨çš„é…ç½®ï¼š
```env
# Database Configuration
DATABASE_URL=mysql+pymysql://username:password@localhost:3306/database_name

# Security Configuration
SECRET_KEY=your-secure-secret-key-here
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Project Configuration
PROJECT_ROOT=/path/to/project
```

#### æ–¹æ³•ä¸‰ï¼šDockerçŽ¯å¢ƒå˜é‡
è¿è¡ŒDockerå®¹å™¨æ—¶ä¼ é€’çŽ¯å¢ƒå˜é‡ï¼š
```bash
docker run -d -p 8000:8000 \
  -e DATABASE_URL="mysql+pymysql://username:password@host:port/database" \
  -e SECRET_KEY="your-secret-key" \
  payroll-system
```

### æ£€æŸ¥çŽ¯å¢ƒé…ç½®
```bash
cd backend
python setup_env.py check
```

## å®‰è£…ä¸Žè¿è¡Œ

### åŽç«¯å®‰è£…

1. è¿›å…¥åŽç«¯ç›®å½•
```bash
cd backend
```

2. åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒ
```bash
python -m venv venv
```

3. æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒ
```bash
# Windows
env\Scripts\activate

# Linux/macOS
source venv/bin/activate
```

4. å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

5. é…ç½®çŽ¯å¢ƒå˜é‡ï¼ˆä½¿ç”¨ä¸Šè¿°ä»»ä¸€æ–¹æ³•ï¼‰

6. åˆå§‹åŒ–æ•°æ®åº“
```bash
python scripts/init_db.py
```

7. è¿è¡ŒåŽç«¯æœåŠ¡
```bash
python run.py
```

åŽç«¯æœåŠ¡å°†åœ¨ http://localhost:8000 å¯åŠ¨

### å‰ç«¯å®‰è£…

1. è¿›å…¥å‰ç«¯ç›®å½•
```bash
cd frontend
```

2. å®‰è£…ä¾èµ–
```bash
npm install
```

3. å¼€å‘æ¨¡å¼è¿è¡Œ
```bash
npm run dev
```

å‰ç«¯å¼€å‘æœåŠ¡å°†åœ¨ http://localhost:5173 å¯åŠ¨

4. æž„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
npm run build
```

æž„å»ºåŽçš„æ–‡ä»¶å°†ç”Ÿæˆåœ¨ `dist` ç›®å½•ä¸‹

## APIæ–‡æ¡£

åŽç«¯æä¾›äº†å®Œæ•´çš„APIæ–‡æ¡£ï¼Œè®¿é—®ä»¥ä¸‹åœ°å€æŸ¥çœ‹ï¼š

- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

## æ•°æ®åº“ç»“æž„

### ä¸»è¦è¡¨ç»“æž„

1. **users** - ç”¨æˆ·è¡¨
   - id: ç”¨æˆ·ID
   - username: ç”¨æˆ·å
   - password: å¯†ç 
   - name: çœŸå®žå§“å
   - role: è§’è‰²ï¼ˆadmin/statistician/reportï¼‰
   - created_at: åˆ›å»ºæ—¶é—´

2. **workers** - å·¥äººè¡¨
   - worker_code: å·¥å·
   - name: å§“å
   - created_at: åˆ›å»ºæ—¶é—´

3. **processes** - å·¥åºè¡¨
   - process_code: å·¥åºç¼–ç 
   - name: å·¥åºåç§°
   - description: æè¿°
   - created_at: åˆ›å»ºæ—¶é—´

4. **process_cat1** - å·¥æ®µç±»åˆ«è¡¨
   - cat1_code: å·¥æ®µç¼–ç 
   - name: å·¥æ®µåç§°
   - description: å·¥æ®µæè¿°
   - created_at: åˆ›å»ºæ—¶é—´

5. **process_cat2** - å·¥åºç±»åˆ«è¡¨
   - cat2_code: å·¥åºç±»åˆ«ç¼–ç 
   - name: å·¥åºç±»åˆ«åç§°
   - description: å·¥åºç±»åˆ«æè¿°
   - created_at: åˆ›å»ºæ—¶é—´

6. **motor_models** - ç”µæœºåž‹å·è¡¨
   - name: ç”µæœºåž‹å·åç§°
   - aliases: ç”µæœºåž‹å·åˆ«å
   - description: ç”µæœºåž‹å·æè¿°
   - created_at: åˆ›å»ºæ—¶é—´

7. **quotas** - å®šé¢è¡¨
   - id: å®šé¢ID
   - process_code: å·¥åºç¼–ç 
   - cat1_code: å·¥æ®µç¼–ç 
   - cat2_code: å·¥åºç±»åˆ«ç¼–ç 
   - model_name: ç”µæœºåž‹å·åç§°
   - unit_price: å•ä»·
   - effective_date: ç”Ÿæ•ˆæ—¥æœŸ
   - obsolete_date: ä½œåºŸæ—¥æœŸï¼ˆé»˜è®¤å€¼ï¼š9999-12-31ï¼Œè¡¨ç¤ºå½“å‰æœ‰æ•ˆå®šé¢ï¼‰
   - created_by: åˆ›å»ºäºº
   - created_at: åˆ›å»ºæ—¶é—´

8. **work_records** - å·¥ä½œè®°å½•è¡¨
   - id: è®°å½•ID
   - worker_code: å·¥å·
   - quota_id: å®šé¢ID
   - quantity: æ•°é‡
   - record_date: è®°å½•æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰
   - created_by: åˆ›å»ºäºº
   - created_at: åˆ›å»ºæ—¶é—´

9. **v_salary_records** - å·¥èµ„è®°å½•è§†å›¾
   - id: è®°å½•ID
   - worker_code: å·¥å·
   - quota_id: å®šé¢ID
   - quantity: æ•°é‡
   - unit_price: å•ä»·
   - amount: é‡‘é¢ï¼ˆè‡ªåŠ¨è®¡ç®—ï¼šquantity Ã— unit_priceï¼‰
   - record_date: è®°å½•æ—¥æœŸ
   - created_by: åˆ›å»ºäºº
   - created_at: åˆ›å»ºæ—¶é—´
   - model_display: ç”µæœºåž‹å·æ˜¾ç¤º
   - cat1_display: å·¥æ®µç±»åˆ«æ˜¾ç¤º
   - cat2_display: å·¥åºç±»åˆ«æ˜¾ç¤º
   - process_display: å·¥åºæ˜¾ç¤º

## ä½¿ç”¨è¯´æ˜Ž

1. **ç™»å½•ç³»ç»Ÿ**
   - è®¿é—® http://localhost:8000
   - ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•ï¼ˆåˆå§‹è´¦å·å¯åœ¨ä»£ç ä¸­é…ç½®ï¼‰
   - æ–°ç”¨æˆ·é¦–æ¬¡ç™»å½•ä¼šæç¤ºä¿®æ”¹å¯†ç 

2. **åŸºç¡€æ•°æ®ç»´æŠ¤**
   - é¦–å…ˆæ·»åŠ å·¥åºä¿¡æ¯
   - ç„¶åŽè®¾ç½®å„å·¥åºçš„å®šé¢
   - æ·»åŠ å·¥äººä¿¡æ¯

3. **å·¥èµ„ç®¡ç†**
   - æ¯æœˆå½•å…¥å·¥äººçš„ç”Ÿäº§æ•°é‡
   - ç³»ç»Ÿè‡ªåŠ¨è®¡ç®—å·¥èµ„
   - ç”Ÿæˆå·¥èµ„æŠ¥è¡¨

4. **æŠ¥è¡¨ç»Ÿè®¡**
   - æŸ¥çœ‹å·¥èµ„ç»Ÿè®¡æŠ¥è¡¨
   - åˆ†æžç”Ÿäº§æ•ˆçŽ‡
   - å¯¼å‡ºæ•°æ®

è¯¦ç»†ä½¿ç”¨è¯´æ˜Žè¯·å‚è€ƒ [ç”¨æˆ·æ‰‹å†Œ.md](ç”¨æˆ·æ‰‹å†Œ.md)

## å¼€å‘è¯´æ˜Ž

### åŽç«¯å¼€å‘

- æ–°å¢žAPIè·¯ç”±ï¼šåœ¨ `backend/app/api/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„è·¯ç”±æ–‡ä»¶
- æ–°å¢žæ•°æ®æ¨¡åž‹ï¼šåœ¨ `backend/app/models.py` ä¸­å®šä¹‰
- æ–°å¢žæ•°æ®æ ¡éªŒï¼šåœ¨ `backend/app/schemas.py` ä¸­å®šä¹‰
- æ–°å¢žCRUDæ“ä½œï¼šåœ¨ `backend/app/crud.py` ä¸­å®žçŽ°

### å‰ç«¯å¼€å‘

- **TypeScriptæž¶æž„**ï¼šæ ¸å¿ƒåŸºç¡€è®¾æ–½ä½¿ç”¨TypeScript (`App.tsx`, `Layout.tsx`, `Login.tsx`, `api.ts`)
- **æ··åˆé¡µé¢**ï¼šé¡µé¢ç»„ä»¶é‡‡ç”¨æ¸è¿›å¼è¿ç§»ç­–ç•¥ï¼ˆå½“å‰ä¸ºJavaScriptï¼Œæœªæ¥è¿ç§»åˆ°TypeScriptï¼‰
- **æ–°å¢žé¡µé¢**ï¼šåœ¨ `frontend/src/pages/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„é¡µé¢ç»„ä»¶ï¼ˆå»ºè®®ä½¿ç”¨`.tsx`ï¼‰
- **æ–°å¢žç»„ä»¶**ï¼šåœ¨ `frontend/src/components/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„ç»„ä»¶ï¼ˆå»ºè®®ä½¿ç”¨`.tsx`ï¼‰
- **APIè°ƒç”¨**ï¼šé€šè¿‡ `frontend/src/services/api.ts` å°è£…çš„APIæ–¹æ³•è°ƒç”¨åŽç«¯æŽ¥å£
- **ç±»åž‹å®šä¹‰**ï¼šåœ¨ `frontend/src/types/` ç›®å½•ä¸‹ç»´æŠ¤TypeScriptç±»åž‹å®šä¹‰

## éƒ¨ç½²

### å¼€å‘çŽ¯å¢ƒéƒ¨ç½²

1. å¯åŠ¨åŽç«¯æœåŠ¡
2. å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡
3. è®¿é—® http://localhost:5173

### ç”Ÿäº§çŽ¯å¢ƒéƒ¨ç½²

1. æž„å»ºå‰ç«¯ç”Ÿäº§ç‰ˆæœ¬
2. å¯åŠ¨åŽç«¯æœåŠ¡ï¼ˆå¯ä½¿ç”¨Gunicornç­‰WSGIæœåŠ¡å™¨ï¼‰
3. é…ç½®Nginxåå‘ä»£ç†
4. è®¿é—®ç”Ÿäº§æœåŠ¡å™¨åœ°å€

## Dockeréƒ¨ç½²

### æœ¬åœ°Dockeréƒ¨ç½²
1. æž„å»ºDockeré•œåƒ
```bash
docker build -t payroll-system .
```

2. è¿è¡ŒDockerå®¹å™¨
```bash
docker run -d -p 8000:8000 payroll-system
```

### äº‘æœåŠ¡å™¨éƒ¨ç½²
ç³»ç»Ÿå·²é…ç½®æ”¯æŒäº‘æœåŠ¡å™¨HTTPSéƒ¨ç½²ï¼Œè¯·å‚è€ƒæœ€æ–°çš„éƒ¨ç½²æ–‡æ¡£ã€‚

#### æŽ¨èéƒ¨ç½²æµç¨‹
å‚è€ƒ [HTTPS_DEPLOYMENT_ANALYSIS_AND_PROCEDURE.md](HTTPS_DEPLOYMENT_ANALYSIS_AND_PROCEDURE.md) æ–‡ä»¶ä¸­çš„"Robust HTTPS Deployment Procedure"ç« èŠ‚ï¼ŒåŒ…å«å®Œæ•´çš„å‡†å¤‡ã€æ•°æ®åº“å‡†å¤‡ã€Dockeréƒ¨ç½²ã€éªŒè¯å’Œå›žæ»šæ­¥éª¤ã€‚

#### è¯¦ç»†éƒ¨ç½²æŒ‡å—
- **CLOUD_DEPLOYMENT.md**: åŸºç¡€äº‘æœåŠ¡å™¨éƒ¨ç½²æŒ‡å—ï¼ˆå·²æ›´æ–°ï¼‰
- **HTTPS_DEPLOYMENT_GUIDE.md**: HTTPSéƒ¨ç½²æŒ‡å—ï¼ˆå·²æ›´æ–°ï¼‰
- **HTTPS_DEPLOYMENT_ANALYSIS_AND_PROCEDURE.md**: è¯¦ç»†çš„HTTPSéƒ¨ç½²åˆ†æžä¸Žæµç¨‹æ–‡æ¡£ï¼ˆæœ€æ–°ï¼‰

#### å…³é”®æ–‡ä»¶
- `nginx-https-production.conf`: ç”Ÿäº§çŽ¯å¢ƒNginx HTTPSé…ç½®
- `generate_ssl_cert.sh`: SSLè¯ä¹¦ç”Ÿæˆè„šæœ¬
- `fix_password_hash.py`: å¯†ç å“ˆå¸Œä¿®å¤è„šæœ¬ï¼ˆå¦‚é‡ç™»å½•é—®é¢˜ï¼‰
- `test_https_puppeteer.js`: HTTPSè‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬ï¼ˆéƒ¨ç½²éªŒè¯ï¼‰

### Dockeréƒ¨ç½²æž¶æž„è¯´æ˜Ž
ç³»ç»Ÿé‡‡ç”¨åŒå®¹å™¨æž¶æž„ï¼Œåˆ†åˆ«è¿è¡ŒåŽç«¯åº”ç”¨å’ŒNginxåå‘ä»£ç†ï¼š

#### 1. åŽç«¯å®¹å™¨ (payroll-backend)
- **é•œåƒæž„å»º**ï¼šä½¿ç”¨é¡¹ç›®æ ¹ç›®å½•çš„ `Dockerfile` æž„å»º
- **åŸºç¡€é•œåƒ**ï¼š`python:3.10`
- **åŒ…å«å†…å®¹**ï¼š
  - PythonåŽç«¯åº”ç”¨ä»£ç 
  - å‰ç«¯æž„å»ºçš„é™æ€æ–‡ä»¶ (`frontend/dist/`)
  - ç³»ç»Ÿä¾èµ–å’ŒPythonåŒ…
- **è¿è¡Œå‘½ä»¤**ï¼š
  ```bash
  docker build -t payroll-backend -f Dockerfile .
  docker run -d --name payroll-backend -p 8000:8000 -v /path/to/payroll.db:/app/payroll.db payroll-backend
  ```

#### 2. Nginxå®¹å™¨ (payroll-nginx)
- **é•œåƒæ¥æº**ï¼šç›´æŽ¥ä½¿ç”¨å®˜æ–¹ `nginx:alpine` é•œåƒï¼Œ**æ— éœ€è‡ªå®šä¹‰Dockerfile**
- **é…ç½®æ–¹å¼**ï¼šè¿è¡Œæ—¶æŒ‚è½½é…ç½®æ–‡ä»¶
- **åˆ›å»ºå‘½ä»¤**ï¼š
  ```bash
  docker run -d --name payroll-nginx \
    -p 80:80 -p 443:443 \
    -v /path/to/nginx-https-production.conf:/etc/nginx/conf.d/default.conf:ro \
    -v /path/to/ssl:/app/ssl:ro \
    -v /path/to/frontend-dist:/app/frontend/dist:ro \
    nginx:alpine
  ```

#### æž¶æž„ä¼˜åŠ¿
1. **åˆ†ç¦»å…³æ³¨ç‚¹**ï¼šåŽç«¯å’ŒNginxç‹¬ç«‹å®¹å™¨ï¼Œä¾¿äºŽç»´æŠ¤å’Œæ‰©å±•
2. **é…ç½®çµæ´»**ï¼šNginxé…ç½®å¯éšæ—¶ä¿®æ”¹ï¼Œæ— éœ€é‡æ–°æž„å»ºé•œåƒ
3. **è½»é‡çº§**ï¼šä½¿ç”¨Alpineé•œåƒï¼Œèµ„æºå ç”¨å°‘
4. **å®˜æ–¹ç»´æŠ¤**ï¼šNginxé•œåƒç”±Dockerå®˜æ–¹ç»´æŠ¤ï¼Œå®‰å…¨æ›´æ–°åŠæ—¶

#### å®¹å™¨é—´é€šä¿¡
```
ç”¨æˆ·è¯·æ±‚ â†’ Nginxå®¹å™¨ (80/443) â†’ åŽç«¯å®¹å™¨ (8000) â†’ æ•°æ®åº“
         â†‘                    â†‘
     SSLç»ˆæ­¢             åå‘ä»£ç†
```

#### é…ç½®æ–‡ä»¶è¯´æ˜Ž
- `nginx-https-production.conf`ï¼šç”Ÿäº§çŽ¯å¢ƒHTTPSé…ç½®
  - HTTPè‡ªåŠ¨é‡å®šå‘åˆ°HTTPS
  - é™æ€æ–‡ä»¶æœåŠ¡ (`/app/frontend/dist`)
  - APIåå‘ä»£ç† (`/api/` â†’ `http://172.17.0.1:8000`)
  - SSLè¯ä¹¦é…ç½®

#### æ•°æ®æŒä¹…åŒ–
- **æ•°æ®åº“**ï¼šé€šè¿‡å·æŒ‚è½½ `payroll.db` æ–‡ä»¶
- **é…ç½®æ–‡ä»¶**ï¼šNginxé…ç½®ã€SSLè¯ä¹¦ã€å‰ç«¯æ–‡ä»¶å‡é€šè¿‡å·æŒ‚è½½
- **ä¼˜åŠ¿**ï¼šæ•°æ®åœ¨å®¹å™¨é‡å¯åŽä¸ä¼šä¸¢å¤±ï¼Œé…ç½®å¯éšæ—¶æ›´æ–°

## æµ‹è¯•

é¡¹ç›®åŒ…å«æµ‹è¯•è„šæœ¬ï¼Œä½äºŽ `test/` ç›®å½•ä¸‹ã€‚è¿è¡Œæµ‹è¯•ä»¥ç¡®ä¿åŠŸèƒ½æ­£å¸¸ï¼š

```bash
cd test/development
# è¿è¡ŒAPIæµ‹è¯•
python test_api.py
# è¿è¡Œå‰ç«¯æµ‹è¯•
node test_login.js
```

## å¿«é€Ÿå¼€å§‹

### æœ¬åœ°å¼€å‘
```bash
# å…‹éš†ä»£ç 
git clone https://gitee.com/richardjl/payroll-system.git
cd payroll-system

# å¯åŠ¨åŽç«¯
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
python run.py

# å¯åŠ¨å‰ç«¯ï¼ˆæ–°ç»ˆç«¯ï¼‰
cd frontend
npm install
npm run dev
```

### äº‘æœåŠ¡å™¨éƒ¨ç½²
è¯·å‚è€ƒæœ€æ–°çš„HTTPSéƒ¨ç½²æ–‡æ¡£ [HTTPS_DEPLOYMENT_ANALYSIS_AND_PROCEDURE.md](HTTPS_DEPLOYMENT_ANALYSIS_AND_PROCEDURE.md) ä¸­çš„å®Œæ•´æ­¥éª¤ã€‚

ç®€è¦æ­¥éª¤ï¼š
```bash
# ç™»å½•äº‘æœåŠ¡å™¨
ssh ubuntu@124.220.108.154

# å…‹éš†ä»£ç 
git clone https://gitee.com/richardjl/payroll-system.git
cd payroll-system

# ç”ŸæˆSSLè¯ä¹¦
./generate_ssl_cert.sh

# å‡†å¤‡å‰ç«¯çŽ¯å¢ƒ
cat > frontend/.env << 'EOF'
VITE_API_BASE_URL=/api
VITE_APP_ENV=production
VITE_ENABLE_HTTPS=true
EOF

# æž„å»ºå‰ç«¯
cd frontend
npm install
npm run build
cd ..

# éƒ¨ç½²ï¼ˆè¯¦ç»†å‘½ä»¤è¯·å‚è€ƒæ–‡æ¡£ï¼‰
```

## æ³¨æ„äº‹é¡¹

1. åˆå§‹ç®¡ç†å‘˜è´¦å·éœ€è¦åœ¨ä»£ç ä¸­é…ç½®
2. ç”Ÿäº§çŽ¯å¢ƒä¸­éœ€è¦ä¿®æ”¹CORSé…ç½®ï¼Œé™åˆ¶å…è®¸çš„åŸŸå
3. ç”Ÿäº§çŽ¯å¢ƒå»ºè®®ä½¿ç”¨MySQLæˆ–PostgreSQLæ•°æ®åº“
4. å®šæœŸå¤‡ä»½æ•°æ®åº“

## é¡¹ç›®è®¡åˆ’

æ ¹æ® `.trae/documents/å·¥åŽ‚å®šé¢å’Œè®¡ä»¶å·¥èµ„ç®¡ç†ç³»ç»Ÿå¼€å‘è®¡åˆ’.md` è¿›è¡Œå¼€å‘ï¼ŒåŒ…å«ä»¥ä¸‹é˜¶æ®µï¼š

1. éœ€æ±‚åˆ†æžå’Œç³»ç»Ÿè®¾è®¡
2. åŸºç¡€æ¡†æž¶æ­å»º
3. æ ¸å¿ƒåŠŸèƒ½å¼€å‘
4. æµ‹è¯•å’Œä¼˜åŒ–
5. éƒ¨ç½²ä¸Šçº¿

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿Žè”ç³»å¼€å‘å›¢é˜Ÿã€‚
